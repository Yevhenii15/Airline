import{d as F,g as L,j as C,h as N,m as o,k as U,p as c,o as d,c as i,a as n,s as r,t as E,x as f,y as x,P as M,A as $,Q as j}from"./index-BP76MkKj.js";import{S as P}from"./SeatMap-DJohxYo9.js";const Q={class:"max-w-3xl mx-auto p-6"},T={key:0,class:"text-gray-500"},q={key:1,class:"text-red-500"},z={class:"mt-6"},G=["disabled"],H={key:2,class:"mt-6"},J={key:3,class:"mt-6 text-gray-500"},W=F({__name:"AdminBookedSeatsView",setup(K){const{disabledDates:v,selectedFlightData:S,formatLocalDate:_}=L(),{getBookedSeats:p,availableSeats:D,selectedSeats:g,bookedSeats:y}=C(),{flights:A,fetchFlights:w,error:m,loading:B}=N(),h=o(null),k=o(null),a=o(null),l=o(void 0),u=o(!1);U(()=>{w()}),c(a,s=>{const e=A.value.find(t=>t._id===s)||null;S.value=e}),c(v,()=>{});const b=o(!1);c([a,l],async([s,e])=>{if(s&&e instanceof Date){b.value=!0;const t=_(e);y.value=await p(s,t),b.value=!1}});const V=async()=>{if(!a.value||!l.value)return;const e=new Date(l.value).toLocaleDateString("en-CA");g.value=await p(a.value,e),u.value=!0};return(s,e)=>(d(),i("div",Q,[e[5]||(e[5]=n("h1",{class:"text-2xl font-bold text-[#ff7f50] mb-4"},"Booked Seats Viewer",-1)),r(B)?(d(),i("div",T,"Loading flights...")):r(m)?(d(),i("div",q," Error loading flights: "+E(r(m)),1)):f("",!0),x(M,{departureAirport:h.value,"onUpdate:departureAirport":e[0]||(e[0]=t=>h.value=t),arrivalAirport:k.value,"onUpdate:arrivalAirport":e[1]||(e[1]=t=>k.value=t),selectedFlight:a.value,"onUpdate:selectedFlight":e[2]||(e[2]=t=>a.value=t)},null,8,["departureAirport","arrivalAirport","selectedFlight"]),n("div",z,[a.value?(d(),$(j,{key:0,modelValue:l.value,"onUpdate:modelValue":e[3]||(e[3]=t=>l.value=t),disabledDates:r(v)},null,8,["modelValue","disabledDates"])):f("",!0)]),n("button",{class:"mt-6 bg-[#ff7f50] hover:bg-[#ff956d] text-white font-bold py-2 px-4 rounded w-full",disabled:!a.value||!l.value,onClick:V}," Load Booked Seats ",8,G),a.value&&l.value&&u.value?(d(),i("div",H,[e[4]||(e[4]=n("h2",{class:"text-xl font-semibold mb-2"},"Seat Map",-1)),x(P,{"seat-map":r(D),"selected-seats":[],"highlight-color":"red",selectable:!1},null,8,["seat-map"])])):u.value&&!r(g).length?(d(),i("div",J," No seats booked for the selected flight and date. ")):f("",!0)]))}});export{W as default};
