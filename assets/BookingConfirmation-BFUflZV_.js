import{d as v,h as x,m as f,k as b,o as e,c as s,a as g,y as i,s as n,x as r,t as y,A as p,B,C as w,D as k,E as C}from"./index-DJGtbXNC.js";import{_ as D,a as N,b as I,c as S}from"./TicketList.vue_vue_type_script_setup_true_lang-YSHy1vd1.js";const V={class:"max-w-4xl mx-auto my-10 p-8 bg-black border border-[#ff7f50] text-gray-800 shadow-2xl rounded-2xl"},$={key:0},A={key:0,class:"text-blue-500 mb-4"},E={key:1,class:"text-red-600 mb-4"},F={key:3,class:"space-y-6 mb-8"},q={class:"text-center"},H={key:1,class:"text-gray-500 text-center mt-10 text-lg"},P=v({__name:"BookingConfirmation",setup(J){const{fetchFlightById:_,error:d,loading:h}=x(),t=f(null),l=f({});return b(async()=>{var m;const c=localStorage.getItem("latestBooking");if(!c)return;try{t.value=JSON.parse(c)}catch{return}const a=((m=t.value)==null?void 0:m.tickets.map(o=>o.flight_id))??[],u=Array.from(new Set(a));await Promise.all(u.map(async o=>{try{l.value[o]=await _(o)}catch{l.value[o]=null}}))}),(c,a)=>{const u=w("router-link");return e(),s("div",V,[a[1]||(a[1]=g("h2",{class:"text-4xl font-bold text-green-600 mb-8 text-center"}," ✈️ Booking Confirmation ",-1)),t.value?(e(),s("div",$,[i(D,{booking:t.value,"show-id":!1,"show-cancel-button":!1},null,8,["booking"]),i(N,{booking:t.value,formatDate:n(k)},null,8,["booking","formatDate"]),n(h)?(e(),s("div",A," Loading flight details... ")):r("",!0),n(d)?(e(),s("div",E,y(n(d)),1)):r("",!0),t.value.tickets.length&&l.value[t.value.tickets[0].flight_id]?(e(),p(I,{key:2,ticket:t.value.tickets[0],flight:l.value[t.value.tickets[0].flight_id],formatDate:n(k),class:"mb-8"},null,8,["ticket","flight","formatDate"])):r("",!0),t.value.tickets.length?(e(),s("div",F,[i(S,{tickets:t.value.tickets},null,8,["tickets"])])):r("",!0),g("div",q,[i(u,{to:"/",class:"inline-block bg-green-600 text-white px-6 py-3 rounded-lg font-medium shadow hover:bg-green-700 transition duration-200"},{default:B(()=>a[0]||(a[0]=[C(" ⬅️ Back to Home ")])),_:1})])])):(e(),s("p",H," No booking data found. "))])}}});export{P as default};
