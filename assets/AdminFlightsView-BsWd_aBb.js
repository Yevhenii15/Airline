import{d as N,N as k,f as R,u as L,k as M,o as n,c as u,a as r,w as i,v as p,b as $,F as f,r as w,t as d,O as H,G as O,q as I,m as U,s as g,x as V,D as A,_ as G,h as W,M as Y,y as P,B as j,C as z,E as J}from"./index-BZ9ILXNq.js";const K={class:"my-8 p-6 bg-[#222222] rounded-lg shadow-lg"},Q={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},X=["value"],Z={class:"flex flex-col"},ee={class:"flex flex-col"},te={class:"flex flex-col"},re={class:"flex items-center space-x-2"},ae=N({__name:"AddFlightForm",props:k({routes:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:k(["add-flight","reset-flight"],["update:modelValue"]),setup(D,{emit:y}){const{fetchAirports:c,airportNameMap:m}=R(),a=L(D,"modelValue"),l=y,x=()=>{const b=new Date,e=new Date(a.value.operatingPeriod.startDate),t=new Date(a.value.operatingPeriod.endDate);if(!a.value.route._id){alert("Please select a valid route.");return}if(e<b){alert("Start date cannot be in the past.");return}if(t<e){alert("End date cannot be before the start date.");return}if(!["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].includes(a.value.departureDay)){alert("Please enter a valid departure day (Monday to Sunday).");return}if(!/^([01]\d|2[0-3]):([0-5]\d)$/.test(a.value.departureTime)){alert("Please enter a valid departure time in the format HH:MM.");return}l("add-flight",a.value),alert("Flight added successfully!"),l("reset-flight")},h=b=>`${m.value[b.departureAirport_id]} → ${m.value[b.arrivalAirport_id]}`;return M(()=>{c()}),(b,e)=>(n(),u("div",K,[e[15]||(e[15]=r("h2",{class:"text-2xl font-semibold text-blue-400 mb-4"},"➕ Add Flight",-1)),r("form",{onSubmit:O(x,["prevent"])},[r("div",Q,[i(r("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.flightNumber=t),type:"text",placeholder:"Flight Number",class:"p-3 border border-gray-600 rounded bg-[#2b2b2b] text-white focus:ring focus:ring-blue-500"},null,512),[[p,a.value.flightNumber]]),i(r("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.route._id=t),class:"p-3 border border-gray-600 rounded bg-[#2b2b2b] text-white focus:ring focus:ring-blue-500"},[e[9]||(e[9]=r("option",{value:"",disabled:""},"Select Route",-1)),(n(!0),u(f,null,w(b.routes,t=>(n(),u("option",{key:t._id,value:t._id},d(h(t)),9,X))),128))],512),[[$,a.value.route._id]]),i(r("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.departureDay=t),type:"text",placeholder:"Departure Day (e.g., Monday)",class:"p-3 border border-gray-600 rounded bg-[#2b2b2b] text-white focus:ring focus:ring-blue-500"},null,512),[[p,a.value.departureDay]]),i(r("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.departureTime=t),type:"text",placeholder:"Departure Time (e.g., 14:30)",class:"p-3 border border-gray-600 rounded bg-[#2b2b2b] text-white focus:ring focus:ring-blue-500"},null,512),[[p,a.value.departureTime]]),r("div",Z,[e[10]||(e[10]=r("label",{for:"aircraft_id",class:"text-gray-400"},"Aircraft type",-1)),i(r("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.aircraft_id=t),type:"text",placeholder:"Aircraft Type",class:"p-3 border border-gray-600 rounded bg-[#2b2b2b] text-white focus:ring focus:ring-blue-500"},null,512),[[p,a.value.aircraft_id]])]),r("div",ee,[e[11]||(e[11]=r("label",{for:"basePrice",class:"text-gray-400"},"Base price",-1)),i(r("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.basePrice=t),type:"number",placeholder:"Base Price",class:"p-3 border border-gray-600 rounded bg-[#2b2b2b] text-white focus:ring focus:ring-blue-500"},null,512),[[p,a.value.basePrice]])]),r("div",te,[e[12]||(e[12]=r("label",{for:"startDate",class:"text-gray-400"},"Operating Period",-1)),i(r("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>a.value.operatingPeriod.startDate=t),type:"date",class:"mb-2 p-3 border border-gray-600 rounded bg-[#2b2b2b] text-white focus:ring focus:ring-blue-500"},null,512),[[p,a.value.operatingPeriod.startDate]]),i(r("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>a.value.operatingPeriod.endDate=t),type:"date",class:"p-3 border border-gray-600 rounded bg-[#2b2b2b] text-white focus:ring focus:ring-blue-500"},null,512),[[p,a.value.operatingPeriod.endDate]])]),r("div",re,[i(r("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>a.value.isReturnFlightRequired=t),type:"checkbox",class:"text-white"},null,512),[[H,a.value.isReturnFlightRequired]]),e[13]||(e[13]=r("span",{class:"text-gray-400"},"Return Flight Required",-1))])]),e[14]||(e[14]=r("button",{type:"submit",class:"mt-4 w-full bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 transition"}," ✈️ Create Flight ",-1))],32)]))}}),le={class:"my-8 p-6 bg-[#222222] rounded-lg shadow-lg"},se={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},oe=["value"],ie={class:"flex flex-col"},de={class:"mt-4 flex space-x-2"},ne={class:"text-lg font-semibold text-white"},ue={class:"font-semibold text-sm"},pe={class:"text-gray-400 text-sm"},ge={class:"text-gray-400 text-sm"},be={class:"text-gray-400 text-sm"},me={class:"text-gray-400 text-sm"},ce={class:"text-gray-400 text-sm"},ve={class:"text-gray-400 text-sm"},fe={class:"text-gray-400 text-sm"},ye={class:"mt-4 flex space-x-2"},xe=["onClick"],he=["onClick"],_e=N({__name:"FlightList",props:{flights:{},routes:{},airportNameMap:{}},emits:["delete-flight","update-flight"],setup(D,{emit:y}){const c=I(()=>[...m.flights].reverse()),m=D,a=y,l=U(null),x=e=>{l.value={...e,departureTime:e.departureTime,operatingPeriod:{startDate:e.operatingPeriod.startDate.slice(0,10),endDate:e.operatingPeriod.endDate.slice(0,10)}}},h=()=>{l.value&&(a("update-flight",l.value),l.value=null)},b=e=>!e||!m.airportNameMap[e.departureAirport_id]||!m.airportNameMap[e.arrivalAirport_id]?"Unknown Route":`${m.airportNameMap[e.departureAirport_id]} → ${m.airportNameMap[e.arrivalAirport_id]}`;return(e,t)=>(n(),u("div",le,[t[11]||(t[11]=r("h2",{class:"text-2xl font-semibold text-green-400 mb-4"},"📋 Flights",-1)),(n(!0),u(f,null,w(c.value,o=>(n(),u("div",{key:o._id,class:"mb-4 p-4 bg-[#2b2b2b] rounded-lg shadow"},[l.value&&l.value._id===o._id?(n(),u(f,{key:0},[r("div",se,[i(r("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.value.flightNumber=s),placeholder:"Flight Number",class:"input"},null,512),[[p,l.value.flightNumber]]),i(r("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.value.route._id=s),class:"input"},[t[9]||(t[9]=r("option",{value:"",disabled:""},"Select Route",-1)),(n(!0),u(f,null,w(e.routes,s=>(n(),u("option",{key:s._id,value:s._id},d(b(s)),9,oe))),128))],512),[[$,l.value.route._id]]),i(r("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.departureDay=s),placeholder:"Departure Day",class:"input"},null,512),[[p,l.value.departureDay]]),i(r("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.departureTime=s),placeholder:"Departure Time",class:"input"},null,512),[[p,l.value.departureTime]]),i(r("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.value.aircraft_id=s),placeholder:"Aircraft ID",class:"input"},null,512),[[p,l.value.aircraft_id]]),i(r("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.value.basePrice=s),type:"number",placeholder:"Base Price",class:"input"},null,512),[[p,l.value.basePrice]]),r("div",ie,[t[10]||(t[10]=r("label",{for:"startDate",class:"text-gray-400"},"Operating Period",-1)),i(r("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.value.operatingPeriod.startDate=s),type:"date",class:"input"},null,512),[[p,l.value.operatingPeriod.startDate]]),i(r("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.value.operatingPeriod.endDate=s),type:"date",class:"input"},null,512),[[p,l.value.operatingPeriod.endDate]])])]),r("div",de,[r("button",{onClick:h,class:"btn bg-blue-600 hover:bg-blue-700"}," 💾 Save "),r("button",{onClick:t[8]||(t[8]=s=>l.value=null),class:"btn bg-gray-600 hover:bg-gray-700"}," ❌ Cancel ")])],64)):(n(),u(f,{key:1},[r("p",ne," ✈️ "+d(o.flightNumber)+" ("+d(b(o.route))+") ",1),r("p",ue,d(o.status==="Scheduled"?"✅ Scheduled":"❌ Cancelled"),1),r("p",pe,"📅 "+d(o.departureDay),1),r("p",ge," 🕒 "+d(o.departureTime)+" → "+d(o.arrivalTime),1),r("p",be,"🆔 ID: "+d(o._id),1),r("p",me," 🛩️ Aircraft Type: "+d(o.aircraft_id),1),r("p",ce," 💰 Base Price: "+d(o.basePrice),1),r("p",ve," 📅 Operating Period: "+d(o.operatingPeriod?g(A)(o.operatingPeriod.startDate):"N/A")+" to "+d(o.operatingPeriod?g(A)(o.operatingPeriod.endDate):"N/A"),1),r("p",fe," 🔄 Return Flight Required: "+d(o.isReturnFlightRequired?"Yes":"No"),1),r("div",ye,[o.status!=="Cancelled"?(n(),u("button",{key:0,onClick:s=>e.$emit("delete-flight",o._id),class:"btn bg-red-600 hover:bg-red-700"}," 🗑 Delete ",8,xe)):V("",!0),o.status!=="Cancelled"?(n(),u("button",{key:1,onClick:s=>x(o),class:"btn bg-green-600 hover:bg-green-700"}," ✏️ Edit ",8,he)):V("",!0)])],64))]))),128))]))}}),De=G(_e,[["__scopeId","data-v-39dce582"]]),Fe={class:"p-6"},Pe={class:"bg-[#181818] min-h-screen p-6 text-white"},we={key:0,class:"text-center text-blue-400 text-lg"},Ve={key:1,class:"text-center text-red-500 font-semibold"},ke=N({__name:"AdminFlightsView",setup(D){const{flights:y,error:c,loading:m,fetchFlights:a,cancelFlight:l,addFlight:x,updateFlight:h}=W(),{routes:b,fetchRoutes:e,error:t,loading:o}=Y(),{fetchAirports:s,airportNameMap:T}=R(),F=U({flightNumber:"",departureDay:"",departureTime:"",status:"Scheduled",route:{_id:"",departureAirport_id:"",arrivalAirport_id:"",duration:""},aircraft_id:"",totalSeats:192,seatMap:[],seats:[],basePrice:0,operatingPeriod:{startDate:"",endDate:""},isReturnFlightRequired:!1}),C=()=>{F.value={flightNumber:"",departureDay:"",departureTime:"",status:"Scheduled",route:{_id:"",departureAirport_id:"",arrivalAirport_id:"",duration:""},aircraft_id:"",totalSeats:192,seatMap:[],seats:[],basePrice:0,operatingPeriod:{startDate:"",endDate:""},isReturnFlightRequired:!1}},S=async _=>{await x(_),await a()},q=async _=>{await h(_._id,_),await a()};return M(()=>{e(),a(),s()}),(_,v)=>{const B=z("router-link");return n(),u(f,null,[r("div",Fe,[P(B,{to:"/admin",class:"inline-block mb-4 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition"},{default:j(()=>v[1]||(v[1]=[J(" 🔙 Back to Admin ")])),_:1})]),r("div",Pe,[v[2]||(v[2]=r("h1",{class:"text-3xl font-bold text-center mb-8"},"✈️ Admin View - Flights",-1)),g(m)&&g(o)?(n(),u("div",we," ⏳ Loading... ")):g(c)||g(t)?(n(),u("div",Ve,d(g(c)||g(t)),1)):V("",!0),P(ae,{modelValue:F.value,"onUpdate:modelValue":v[0]||(v[0]=E=>F.value=E),routes:g(b),onAddFlight:S,onResetFlight:C},null,8,["modelValue","routes"]),P(De,{flights:g(y),routes:g(b),"airport-name-map":g(T),onDeleteFlight:g(l),onUpdateFlight:q},null,8,["flights","routes","airport-name-map","onDeleteFlight"])])],64)}}});export{ke as default};
