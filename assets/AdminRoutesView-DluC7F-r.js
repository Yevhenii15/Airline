import{d as C,m as h,p as N,o as i,c as a,a as o,L as F,w as k,b as S,F as f,r as w,t as m,G as T,E as g,y as $,B as A,M as j,f as I,q,k as G,s as n,A as E,C as z}from"./index-BZ9ILXNq.js";const J={class:"my-8 p-6 bg-[#222222] rounded-lg shadow-lg"},K={class:"text-2xl font-semibold text-blue-400 mb-4"},O={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},P=["value"],Q=["value"],W=["value"],X={type:"submit",class:"mt-4 w-full bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 transition"},B=C({__name:"RouteForm",props:{airports:{},durations:{},modelValue:{}},emits:["update:modelValue","submit"],setup(_,{emit:v}){const u=_,p=v,r=h({...u.modelValue});N(()=>u.modelValue,l=>{r.value={...l}});const c=()=>{p("submit",{...r.value}),p("update:modelValue",{...r.value}),r.value={departureAirport_id:"",arrivalAirport_id:"",duration:""}};return(l,e)=>(i(),a("div",J,[o("h2",K,[F(l.$slots,"title",{},()=>[e[3]||(e[3]=g("➕ Add Flight Route"))])]),o("form",{onSubmit:T(c,["prevent"])},[o("div",O,[k(o("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.value.departureAirport_id=t),class:"p-3 border border-gray-600 rounded bg-[#2b2b2b] text-white focus:ring focus:ring-blue-500"},[e[4]||(e[4]=o("option",{value:"",disabled:""},"Select Departure Airport",-1)),(i(!0),a(f,null,w(l.airports,t=>(i(),a("option",{key:t._id,value:t.airportCode},m(t.name)+" ("+m(t.airportCode)+") ",9,P))),128))],512),[[S,r.value.departureAirport_id]]),k(o("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>r.value.arrivalAirport_id=t),class:"p-3 border border-gray-600 rounded bg-[#2b2b2b] text-white focus:ring focus:ring-blue-500"},[e[5]||(e[5]=o("option",{value:"",disabled:""},"Select Arrival Airport",-1)),(i(!0),a(f,null,w(l.airports,t=>(i(),a("option",{key:t._id,value:t.airportCode},m(t.name)+" ("+m(t.airportCode)+") ",9,Q))),128))],512),[[S,r.value.arrivalAirport_id]]),k(o("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>r.value.duration=t),class:"p-3 border border-gray-600 rounded bg-[#2b2b2b] text-white focus:ring focus:ring-blue-500"},[e[6]||(e[6]=o("option",{value:"",disabled:""},"Select Duration",-1)),(i(!0),a(f,null,w(l.durations,t=>(i(),a("option",{key:t,value:t},m(t),9,W))),128))],512),[[S,r.value.duration]])]),o("button",X,[F(l.$slots,"buttonText",{},()=>[e[7]||(e[7]=g("✈️ Create Route"))])])],32)]))}}),Y={class:"mb-4 p-4 bg-[#2b2b2b] rounded-lg shadow"},Z={class:"mt-4 flex items-center justify-between"},tt={class:"text-gray-400 text-sm"},et=C({__name:"RouteItem",props:{route:{},airports:{},durations:{}},emits:["delete","edit"],setup(_,{emit:v}){const u=_,p=v,r=h({...u.route}),c=()=>p("delete",r.value._id),l=e=>p("edit",{id:r.value._id,data:e});return(e,t)=>(i(),a("div",Y,[$(B,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=V=>r.value=V),airports:e.airports,durations:e.durations,onSubmit:l},{title:A(()=>t[1]||(t[1]=[g("📝 Edit Flight Route")])),buttonText:A(()=>t[2]||(t[2]=[g("✏️ Save Changes")])),_:1},8,["modelValue","airports","durations"]),o("div",Z,[o("p",tt,"🆔 ID: "+m(r.value._id),1),o("div",{class:"flex space-x-2"},[o("button",{class:"bg-red-600 text-white p-2 rounded-lg hover:bg-red-700 transition",onClick:c}," 🗑 Delete ")])])]))}}),ot={class:"flex justify-between p-6 mb-4"},rt={class:"bg-[#181818] min-h-screen p-6 text-white"},st={key:0,class:"text-center text-blue-400 text-lg"},it={key:1,class:"text-center text-red-500 font-semibold"},at={class:"my-8 p-6 bg-[#222222] rounded-lg shadow-lg"},nt=C({__name:"AdminRoutesView",setup(_){const{routes:v,error:u,loading:p,fetchRoutes:r,deleteRoute:c,addRoute:l,updateRoute:e}=j(),{airports:t,fetchAirports:V,loading:U,error:D}=I(),M=q(()=>[...v.value].reverse());G(()=>{V(),r()});const x=h([]);for(let d=0;d<=10;d++){const s=d.toString().padStart(2,"0");x.value.push(`${s}:00`);for(let b=15;b<60;b+=15)x.value.push(`${s}:${b.toString().padStart(2,"0")}`)}const R=h({departureAirport_id:"",arrivalAirport_id:"",duration:""}),H=async d=>{await l(d),R.value={departureAirport_id:"",arrivalAirport_id:"",duration:""}},L=async({id:d,data:s})=>{await e(d,s)};return(d,s)=>{const b=z("router-link");return i(),a(f,null,[o("div",ot,[$(b,{to:"/admin",class:"inline-block mb-4 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition"},{default:A(()=>s[1]||(s[1]=[g(" 🔙 Back to Admin ")])),_:1}),$(b,{to:"/admin_flights",class:"inline-block mb-4 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition"},{default:A(()=>s[2]||(s[2]=[g(" Create Flight ➡️ ")])),_:1})]),o("div",rt,[s[4]||(s[4]=o("h1",{class:"text-3xl font-bold text-center mb-8"}," ✈️ Admin View - Flight Routes ",-1)),n(p)&&n(U)?(i(),a("div",st," ⏳ Loading... ")):n(u)||n(D)?(i(),a("div",it,m(n(u)||n(D)),1)):(i(),E(B,{key:2,modelValue:R.value,"onUpdate:modelValue":s[0]||(s[0]=y=>R.value=y),airports:n(t),durations:x.value,onSubmit:H},null,8,["modelValue","airports","durations"])),o("div",at,[s[3]||(s[3]=o("h2",{class:"text-2xl font-semibold text-green-400 mb-4"}," 📋 Flight Routes ",-1)),(i(!0),a(f,null,w(M.value,y=>(i(),E(et,{key:y._id,route:y,airports:n(t),durations:x.value,onDelete:n(c),onEdit:L},null,8,["route","airports","durations","onDelete"]))),128))])])],64)}}});export{nt as default};
